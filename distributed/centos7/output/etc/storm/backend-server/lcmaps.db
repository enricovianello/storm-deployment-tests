# LCMAPS policy file/plugin definition
#
### default path
path = /usr/lib64/lcmaps

### Plugin definitions:
good             = "lcmaps_dummy_good.mod"
bad              = "lcmaps_dummy_bad.mod"
localaccount     = "lcmaps_localaccount.mod"
                       "-gridmapfile /etc/grid-security/grid-mapfile"
poolaccount      = "lcmaps_poolaccount.mod"
                       "-gridmapfile /etc/grid-security/grid-mapfile"
                       "-gridmapdir /etc/grid-security/gridmapdir"
                       "-override_inconsistency"
vomslocalgroup   = "lcmaps_voms_localgroup.mod"
                       "-groupmapfile /etc/grid-security/groupmapfile"
                       "-mapmin 0"
#vomspoolgroup    = "lcmaps_voms_poolgroup.mod"
#                       "-groupmapfile /etc/grid-security/groupmapfile"
#                       "-groupmapdir /etc/grid-security/groupmapdir"
#                       "-override_inconsistency"
#                       "-mapmin 0"
vomspoolaccount  = "lcmaps_voms_poolaccount.mod"
                       "-gridmapfile /etc/grid-security/grid-mapfile"
                       "-gridmapdir /etc/grid-security/gridmapdir"

### Policies:
# 
#At first try to locate the primary group, based on VOMS credentials, 
#if this is successful, continue trying to allocate a pool account based on VOMS credentials. 
#If any of the steps fails, it tries to map a poolaccount following the normal 
#/etc/grid-security/grid-mapfile. 
#If even that fails tries to map a local account (necessary for *sgm users)

acquisition_policy:
vomslocalgroup -> vomspoolaccount | poolaccount
vomspoolaccount -> good | poolaccount
poolaccount -> good | localaccount

standard:
vomslocalgroup -> vomspoolaccount | poolaccount
vomspoolaccount -> good | poolaccount
poolaccount -> good | localaccount
